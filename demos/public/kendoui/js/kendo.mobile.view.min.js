/*
* Kendo UI Complete v2013.3.1030 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(define){return define(["./kendo.core.min","./kendo.fx.min","./kendo.mobile.scroller.min"],function(){!function(e,t){function i(e){var t,i,n=e.find(k("popover")),o=d.roles;for(t=0,i=n.length;i>t;t++)l.initWidget(n[t],{},o)}function n(e){l.triggeredByInput(e)||e.preventDefault()}function o(e,t,i){e[0]&&t[0]&&e[0]!=t[0]&&e.kendoAnimateTo(t,{effects:"fade",duration:p,reverse:i})}function r(t){t.each(function(){l.initWidget(e(this),{},d.roles)})}function a(e){for(var t=e.split("?")[1]||"",i={},n=t.split(/&|=/),o=n.length,r=0;o>r;r+=2)i[n[r]]=n[r+1];return i}var l=window.kendo,s=l.mobile,d=s.ui,c=l.attr,h=l.Class,u=d.Widget,f="init",p=320,m='<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />',v="beforeShow",w="show",g="afterShow",y="beforeHide",_="hide",x="z-index",b=l.attrValue,k=l.roleSelector,V=u.extend({init:function(t,i){var n=this;u.fn.init.call(n,t,i),t=n.element,n.params={},n._paramsHistory=[],e.extend(n,i),n.applicationNativeScrolling=s.application&&s.application.options.useNativeScrolling,n._id(),n._layout(),n._scroller(),n._model()},events:[f,v,w,g,y,_],options:{name:"View",title:"",reload:!1,defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null,initWidgets:!0},enable:function(e){t===e&&(e=!0),e?this.overlay.hide():this.overlay.show()},destroy:function(){this.layout&&this.layout.detach(this),u.fn.destroy.call(this),this.scroller&&this.scroller.destroy(),l.destroy(this.element)},purge:function(){this.destroy(),this.element.remove()},showStart:function(){var e=this;e.element.css("display",""),e.inited||(e.inited=!0,e.trigger(f,{view:e})),e.layout&&e.layout.attach(e),e._padIfNativeScrolling(),e.trigger(w,{view:e}),l.resize(e.element)},hideStart:function(){this.trigger(y,{view:this})},hideComplete:function(){var e=this;e.element.hide(),e.trigger(_,{view:e})},updateParams:function(e,t,i){this._paramsHistory[this._paramsHistory.length-2]===JSON.stringify(t)&&(this._paramsHistory.pop(),this.nextViewID=this.id,this.backTransition=this.transition),this.switchWith(new S(this),e,t,i)},_padIfNativeScrolling:function(){this.applicationNativeScrolling&&this.content.css({paddingTop:this.header.height(),paddingBottom:this.footer.height()})},switchWith:function(e,t,i,n){var o=this,r=this._paramsHistory,a=function(){o.trigger(g,{view:o}),o._padIfNativeScrolling(),n()};o.trigger(v,{view:o})||(o._back=r[r.length-1]===JSON.stringify(i),o._back||r.push(JSON.stringify(i)),o.params=i,e?(e.hideStart(),o.showStart(),new N({current:e,next:o,transition:t,defaultTransition:e.options.defaultTransition,complete:a})):(o.showStart(),a()))},parallaxContents:function(e){var t=this,i=t.content;return e.header[0]||(i=i.add(t.header)),e.footer[0]||(i=i.add(t.footer)),i},contentElement:function(){var e=this;return e.options.stretch?e.content:e.scrollerContent},_scroller:function(){var t=this;t.applicationNativeScrolling||(t.options.stretch?t.content.addClass("km-stretched-view"):(t.content.kendoMobileScroller({zoom:t.options.zoom,useNative:t.options.useNativeScrolling}),t.scroller=t.content.data("kendoMobileScroller"),t.scrollerContent=t.scroller.scrollElement),l.support.kineticScrollNeeded&&(e(t.element).on("touchmove",".km-header",n),t.options.useNativeScrolling||e(t.element).on("touchmove",".km-content",n)))},_model:function(){var e=this,t=e.element,n=e.options.model;"string"==typeof n&&(n=l.getter(n)(window)),e.model=n,i(t),e.element.css("display",""),e.options.initWidgets&&(n?l.bind(t.children(),n,d,l.ui,l.dataviz.ui):s.init(t.children())),e.element.css("display","none")},_id:function(){var e=this.element,t=e.attr("id")||"";this.id=b(e,"url")||"#"+t,"#"==this.id&&(this.id=l.guid(),e.attr("id",this.id))},_layout:function(){var t=this,i=k("content"),n=t.element;n.data("kendoView",t).addClass("km-view"),t.transition=b(n,"transition"),t.header=n.children(k("header")).addClass("km-header"),t.footer=n.children(k("footer")).addClass("km-footer"),n.children(i)[0]||n.wrapInner("<div "+c("role")+'="content"></div>'),t.content=n.children(k("content")).addClass("km-content"),t.element.prepend(t.header).append(t.footer),t.overlay=e(m).appendTo(t.element),t.layout&&t.layout.setup(t)}}),S=l.mobile.ui.Widget.extend({init:function(t){var i=t.element.clone(!0);e.extend(this,{element:i,header:i.children(k("header")),content:i.children(k("content")),footer:i.children(k("footer")),transition:t.transition,options:{defaultTransition:t.options.defaultTransition},params:JSON.stringify(t.params),id:t.id}),t.element.parent().append(this.element)},parallaxContents:V.prototype.parallaxContents,hideStart:e.noop,hideComplete:function(){this.element.remove()}}),N=h.extend({init:function(t){e.extend(this,t);var i=this,n=i.current,r=i.next,a=n.element,l=r.element,s=r,d=n,c=i._transition();c.reverse&&(s=n,d=r),s.element.css(x,1),d.element.css(x,0),c.parallax&&(o(n.footer,r.footer,c.reverse),o(n.header,r.header,c.reverse),a=n.parallaxContents(r),l=r.parallaxContents(n)),a.kendoAnimateTo(l,c),i.back()||(n.nextViewID=r.id,n.backTransition=c.transition)},_transition:function(){var e=this,t=e.current,i=e.next,n=e.back(),o=function(){t.hideComplete(),e.complete()},r=n?i.backTransition:i.transition,a=e.transition||r||e.defaultTransition,l=a.split(" "),s=l[0],d=/^slide/.test(s),c="reverse"===l[1];return e.back()&&!e.transition&&(c=!c),{effects:s,reverse:c,parallax:d,complete:o,transition:a,duration:p}},back:function(){var e=this.next,t=this.current;return e.nextViewID&&e.nextViewID===t.id&&e._back}}),C=u.extend({init:function(e,t){var n=this;u.fn.init.call(n,e,t),e=n.element,n.element=e.detach(),n.header=e.children(k("header")).addClass("km-header"),n.footer=e.children(k("footer")).addClass("km-footer"),n.elements=n.header.add(n.footer),i(e),l.mobile.init(n.element.children()),n.trigger(f,{layout:n})},options:{name:"Layout"},events:[f,w,_],setup:function(e){e.header[0]||(e.header=this.header),e.footer[0]||(e.footer=this.footer)},detach:function(e){var t=this;e.header===t.header&&t.header[0]&&e.element.prepend(t.header.detach()[0].cloneNode(!0)),e.footer===t.footer&&t.footer.length&&e.element.append(t.footer.detach()[0].cloneNode(!0)),t.trigger(_,{layout:t,view:e})},attach:function(e){var t=this,i=t.currentView;i&&t.detach(i),e.header===t.header&&(t.header.detach(),e.element.children(k("header")).remove(),e.element.prepend(t.header)),e.footer===t.footer&&(t.footer.detach(),e.element.children(k("footer")).remove(),e.element.append(t.footer)),t.trigger(w,{layout:t,view:e}),t.currentView=e}}),T=l.Observable,W=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,I="loadStart",L="loadComplete",E="showStart",z="sameViewRequested",D="viewShow",H=T.extend({init:function(t){var i,n,o,a=this;if(T.fn.init.call(a),e.extend(a,t),a.sandbox=e("<div />"),o=a.container,i=a._hideViews(o),a.rootView=i.first(),!a.rootView[0]&&t.rootNeeded)throw n=o[0]==l.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.',Error(n);a._view=null,a.layouts={},a._setupLayouts(o),r(o.children(k("modalview drawer"))),a.loader&&(a.bind(E,function(){a.loader.transition()}),a.bind(I,function(){a.loader.show()}),a.bind(L,function(){a.loader.hide()}),a.bind(D,function(){a.loader.transitionDone()}))},view:function(){return this._view},showView:function(e,i){if(e=e.replace(RegExp("^"+this.remoteViewURLPrefix),""),""===e&&this.remoteViewURLPrefix&&(e="/"),e===this.url)return this.trigger(z),t;this.trigger(E);var n=this,o=function(t){n._show(t,i,a(e))},r=n._findViewElement(e),l=r.data("kendoView");n.url=e,l&&l.reload&&(l.purge(),r=[]),this.trigger("viewTypeDetermined",{remote:0===r.length,url:e}),r[0]?(l||(l=n._createView(r)),o(l)):n._loadView(e,o)},append:function(e,t){var i,n,o,a=this,l=a.sandbox,s=(t||"").split("?")[0],d=a.container;return W.test(e)&&(e=RegExp.$1),l[0].innerHTML=e,d.append(l.children("script, style")),i=a._hideViews(l),o=i.first(),o.length||(i=o=l.wrapInner("<div data-role=view />").children()),s&&o.hide().attr(c("url"),s),a._setupLayouts(l),n=l.children(k("modalview drawer")),d.append(l.children(k("layout modalview drawer")).add(i)),r(n),a._createView(o)},_findViewElement:function(e){var t,i=e.split("?")[0];return i?(t=this.container.children("["+c("url")+"='"+i+"']"),t[0]||-1!==i.indexOf("/")||(t=this.container.children("#"===i.charAt(0)?i:"#"+i)),t):this.rootView},_createView:function(e){var i,n=this,o=b(e,"layout");return t===o&&(o=n.layout),o&&(o=n.layouts[o]),i={defaultTransition:n.transition,loader:n.loader,container:n.container,layout:o,reload:b(e,"reload")},l.initWidget(e,i,d.roles)},_loadView:function(i,n){var o=this;return this.serverNavigation?(location.href=i,t):(o._xhr&&o._xhr.abort(),o.trigger(I),o._xhr=e.get(l.absoluteURL(i,o.remoteViewURLPrefix),function(e){o.trigger(L),n(o.append(e,i))},"html").fail(function(e){o.trigger(L),0===e.status&&e.responseText&&n(o.append(e.responseText,i))}),t)},_show:function(e,t,i){var n=this;n._view!==e?e.switchWith(n._view,t,i,function(){n._view=e,n.trigger(D,{view:e})}):n._view.updateParams(t,i,function(){n.trigger(D,{view:n._view})})},_hideViews:function(e){return e.children(k("view splitview")).hide()},_setupLayouts:function(i){var n=this;i.children(k("layout")).each(function(){var i=e(this),o=b(i,"platform");(o===t||o===s.application.os.name)&&(n.layouts[l.attrValue(i,"id")]=l.initWidget(i,{},d.roles))})}});l.mobile.ViewEngine=H,d.plugin(V),d.plugin(C)}(window.kendo.jQuery)})}("function"==typeof define&&define.amd?define:function(e,t){return t()});
//@ sourceMappingURL=kendo.mobile.view.min.js.map